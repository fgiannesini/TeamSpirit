import{l as m,d as h}from"./session-storage-Om7Yksbp.js";const p=n=>{const r=document.createElement("div");r.id=`user-story-${n}`,r.className="user-story";const e=document.createElement("span");return e.textContent=`userStory${n}`,e.className="user-story-title",r.appendChild(e),r},S=n=>{const r=document.createElement("div");return r.className=n,r},f=n=>{const r=n.reduce((e,{userStoryId:o,state:s})=>{const t=`${o}_${s}`;return e.set(t,{userStoryId:o,state:s}),e},new Map).values();return Array.from(r)},v=(n,r)=>{const e=new Map(r.map(t=>[t,[]])),o=Math.max(...n.map(t=>t.time));let s=0;for(;o!==s;){s++;const t=n.filter(a=>a.time===s);f(t).forEach(({userStoryId:a,state:i})=>{if(i==="InProgress"||i==="Review"){const l=e.get(a);if(!l)return;l.push("vertical","horizontal-top","vertical")}}),e.forEach(a=>{const i=a.filter(u=>u.startsWith("horizontal")).length,l=s-i;a.push(...Array.from({length:l}).flatMap(()=>["vertical-dashed","horizontal-bottom","vertical-dashed"]))})}return e},y=n=>{const r=new Map;return n.forEach((e,o)=>{const s=[];for(let t=0;t<e.length;t++)e[t]==="vertical"&&e[t+1]==="vertical"||e[t]==="vertical-dashed"&&e[t+1]==="vertical-dashed"?(s.push("vertical-dashed"),t++):e[t]==="vertical"&&e[t+1]==="vertical-dashed"||e[t]==="vertical-dashed"&&e[t+1]==="vertical"?(s.push("vertical"),t++):s.push(e[t]);r.set(o,s)}),r},E=n=>{n.forEach((r,e)=>{const o=document.querySelector(`#user-story-${e}`);o&&r.forEach(s=>o.appendChild(S(s)))})},q=(n,r)=>{const e=document.querySelector("#user-stories");if(!e)return;const o=r.filter(({action:c})=>c==="CreateUserStory").map(({id:c})=>c);o.filter(c=>c!==-1).map(c=>p(c)).forEach(c=>{e.appendChild(c)});const s=v(n,o),t=y(s);E(t)},g=new URLSearchParams(window.location.search),d=g.get("id");d&&q(h(d),m(d));
