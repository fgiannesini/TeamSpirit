import{l as d,d as h}from"./session-storage-Om7Yksbp.js";const S=(c,s)=>{const e=document.createElement("div");e.id=`user-story-${c}`,e.className="user-story";const r=document.createElement("span");return r.textContent=s,r.className="user-story-title",e.appendChild(r),e},p=c=>{const s=document.createElement("div");return s.className=c,s},f=c=>{const s=c.reduce((e,{userStoryId:r,state:n})=>{const o=`${r}_${n}`;return e.set(o,{userStoryId:r,state:n}),e},new Map).values();return Array.from(s)},v=(c,s)=>{const e=new Map(s.map(o=>[o,[]])),r=Math.max(...c.map(o=>o.time));let n=0;for(;r!==n;){n++;const o=c.filter(t=>t.time===n);f(o).forEach(({userStoryId:t,state:i})=>{if(i==="InProgress"||i==="Review"){const l=e.get(t);if(!l)return;l.push("vertical","horizontal-top","vertical")}}),e.forEach(t=>{const i=t.filter(m=>m.startsWith("horizontal")).length,l=n-i;t.push(...Array.from({length:l}).flatMap(()=>["vertical-dashed","horizontal-bottom","vertical-dashed"]))})}return e},E=c=>{const s=new Map;return c.forEach((e,r)=>{const n=[];for(let o=0;o<e.length;o++){const a=e[o],t=e[o+1];(a==="vertical"||a==="vertical-dashed")&&(t==="vertical"||t==="vertical-dashed")?(n.push(a===t?"vertical-dashed":"vertical"),o++):n.push(a)}s.set(r,n)}),s},y=c=>{c.forEach((s,e)=>{const r=document.querySelector(`#user-story-${e}`);r&&s.forEach(n=>{r.appendChild(p(n))})})},q=(c,s)=>{const e=document.querySelector("#user-stories");if(!e)return;const r=s.filter(({action:t})=>t==="CreateUserStory");r.filter(({id:t})=>t!==-1).map(({id:t,name:i})=>S(t,i)).forEach(t=>{e.appendChild(t)});const n=r.map(({id:t})=>t),o=v(c,n),a=E(o);y(a)},g=new URLSearchParams(window.location.search),u=g.get("id");u&&q(h(u),d(u));
