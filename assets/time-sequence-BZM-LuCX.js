import{l as d,d as h}from"./session-storage-Om7Yksbp.js";const S=(c,n)=>{const e=document.createElement("div");e.id=`user-story-${c}`,e.className="user-story";const r=document.createElement("span");return r.textContent=n,r.className="user-story-title",e.appendChild(r),e},p=c=>{const n=document.createElement("div");return n.className=c,n},f=c=>{const n=c.reduce((e,{userStoryId:r,state:s})=>{const o=`${r}_${s}`;return e.set(o,{userStoryId:r,state:s}),e},new Map).values();return Array.from(n)},v=(c,n)=>{const e=new Map(n.map(o=>[o,[]])),r=Math.max(...c.map(o=>o.time));let s=0;for(;r!==s;){s++;const o=c.filter(t=>t.time===s);f(o).forEach(({userStoryId:t,state:i})=>{if(i==="InProgress"||i==="Review"){const l=e.get(t);if(!l)return;l.push("vertical","horizontal-top","vertical")}}),e.forEach(t=>{const i=t.filter(m=>m.startsWith("horizontal")).length,l=s-i;t.push(...Array.from({length:l}).flatMap(()=>["vertical-dashed","horizontal-bottom","vertical-dashed"]))})}return e},E=c=>{const n=new Map;return c.forEach((e,r)=>{const s=[];for(let o=0;o<e.length;o++){const a=e[o],t=e[o+1];(a==="vertical"||a==="vertical-dashed")&&(t==="vertical"||t==="vertical-dashed")?(s.push(a===t?"vertical-dashed":"vertical"),o++):s.push(a)}n.set(r,s)}),n},y=c=>{c.forEach((n,e)=>{const r=document.querySelector(`#user-story-${e}`);r&&n.forEach(s=>{r.appendChild(p(s))})})},q=(c,n)=>{const e=document.querySelector("#user-stories");if(!e)return;const r=n.filter(t=>t.action==="CreateUserStory");r.filter(({id:t})=>t!==-1).map(({id:t,name:i})=>S(t,i)).forEach(t=>{e.appendChild(t)});const s=r.map(({id:t})=>t),o=v(c,s),a=E(o);y(a)},g=new URLSearchParams(window.location.search),u=g.get("id");u&&q(h(u),d(u));
