import{p as u,S as l}from"./session-storage-Pv8ZUQa-.js";const h=s=>{const r=document.createElement("div");r.id=s,r.className="user-story";const t=document.createElement("span");return t.textContent=s,t.className="user-story-title",r.appendChild(t),r},S=s=>{const r=document.createElement("div");return r.className=s,r},p=s=>{const r=s.reduce((t,{userStoryName:o,state:n})=>{const e=`${o}_${n}`;return t.set(e,{userStoryName:o,state:n}),t},new Map).values();return Array.from(r)},f=(s,r)=>{const t=new Map(r.map(e=>[e,[]])),o=Math.max(...s.map(e=>e.time));let n=0;for(;o!==n;){n++;const e=s.filter(c=>c.time===n);p(e).forEach(({userStoryName:c,state:a})=>{if(a===l.IN_PROGRESS||a===l.REVIEW){const i=t.get(c);if(!i)return;i.push("vertical","horizontal-top","vertical")}}),t.forEach(c=>{const a=c.filter(m=>m.startsWith("horizontal")).length,i=n-a;c.push(...Array.from({length:i}).flatMap(()=>["vertical-dashed","horizontal-bottom","vertical-dashed"]))})}return t},E=s=>{const r=new Map;return s.forEach((t,o)=>{const n=[];for(let e=0;e<t.length;e++)t[e]==="vertical"&&t[e+1]==="vertical"||t[e]==="vertical-dashed"&&t[e+1]==="vertical-dashed"?(n.push("vertical-dashed"),e++):t[e]==="vertical"&&t[e+1]==="vertical-dashed"||t[e]==="vertical-dashed"&&t[e+1]==="vertical"?(n.push("vertical"),e++):n.push(t[e]);r.set(o,n)}),r},v=s=>{s.forEach((r,t)=>{const o=document.querySelector(`#${t}`);o&&r.forEach(n=>o.appendChild(S(n)))})},y=s=>{const r=document.querySelector("#user-stories");if(!r)return;const t=Array.from(new Set(s.map(e=>e.userStoryName)));t.filter(e=>e!=="idle").map(e=>h(e)).forEach(e=>{r.appendChild(e)});const o=f(s,t),n=E(o);v(n)},q=new URLSearchParams(window.location.search),d=q.get("id");d&&y(u(d));
